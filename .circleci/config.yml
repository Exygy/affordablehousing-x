version: 2.1
orbs:
  cypress: cypress-io/cypress@1
executors:
  default:
    docker:
      - image: cypress/base:12.6.0 # at some point we can fix to a version if needed
workflows:
  build:
    jobs:
      - cypress/install:
          executor: cypress/browsers-chrome75
          pre-steps:
            - checkout
            - run: 'yarn install'
      - cypress/run:
          executor: cypress/browsers-chrome75
          yarn: true
          requires:
            - cypress/install
          start: yarn dev:listings && yarn dev:app:public  

# version: 2.1
# orbs:
#   cypress: cypress-io/cypress@1
# jobs:
#   build:
#     docker:
#       - image: circleci/node:current # at some point we can fix to a version if needed
#     steps:
#       - checkout
#       - run: yarn install
#       - run: yarn test:shared:ui
#       - run: yarn test:services:listings
#       - cypress/run:
#         start: yarn dev:listings && yarn dev:app:public 